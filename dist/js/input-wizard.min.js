function CaretLocator(t,e){"use strict";const a=t instanceof jQuery?t:$(t),d=a.get(0),l=d.nodeName.toUpperCase(),u={TextArea:"TEXTAREA",Input:"INPUT"};if((t=l)!=u.TextArea&&t!=u.Input)throw"unsupported element type '"+t+"' for InputManager";const g={marker:$("<span style='white-space: nowrap; padding: 0; margin: 0;'>â€‹</span>"),debug:!1,settings:null};g.settings=$.extend(!0,{},{debug:!1},e),g.debug=g.settings.debug;var p=$("<div></div>").css({"border-width":"1px","border-style":"solid",overflow:"hidden","box-sizing":"border-box","white-space":"pre-wrap","word-wrap":"break-word",position:"absolute",top:g.debug?a.position().top+"px":"0px",left:g.debug?a.position().left+a.width()+100+"px":"-9999px",visibility:g.debug?"visible":"hidden"}),c=$("<div></div>").css({"border-width":"1px","border-style":"solid",overflow:"hidden","box-sizing":"border-box","white-space":"nowrap","word-wrap":"nowrap",position:"absolute",top:g.debug?a.position().top+"px":"0px",left:g.debug?a.position().left+a.width()+100+"px":"-9999px",visibility:g.debug?"visible":"hidden"}),h=["font-family","font-size","font-weight","font-style","font-variant","font-stretch","font-size-adjust","line-height","border-top-width","border-right-width","border-bottom-width","border-left-width","border-style","padding-top","padding-left","padding-bottom","padding-right","box-sizing","width","height","overflow-x","overflow-y","tab-size","moz-tab-size","line-height","letter-spacing","word-spacing","text-decoration","text-align","text-transform","text-indent","direction"],f=["font-family","font-size","font-weight","font-style","font-variant","padding-top","padding-left","padding-bottom","padding-right","line-height","letter-spacing","word-spacing","text-decoration","text-align","direction"];this.setHighlight=function(t,e,n,i){var o;t.empty(),i&&(l==u.TextArea?(o=a.css(h),t.css(o),t.append(e.substr(0,e.length-i.length)),t.append($("<span style='background-color: yellow; color: transparent;'></span>").append(i)),t.append(n),t.css({top:-1*a.scrollTop()})):l==u.Input&&(o=a.css(f),t.css(o),t.append(e.substr(0,e.length-i.length)),t.append($("<span style='background-color: yellow; color: transparent;'></span>").append(i)),t.append(n)))},this.unsetHighlight=function(t){t.empty()},this.setDebug=function(t){g.debug=!!t},this.getCursorOffset=function(t,e){var n,i,o,s=d.clientHeight,r=d.clientWidth;return l==u.TextArea?(n=a.css(h),$.extend(n,{height:s-2,width:r-2}),p.appendTo(a.parent()).css(n).empty().append(t,g.marker,e),i={top:null,right:null,left:null,height:null,isRTL:!1},o=g.marker.position(),i.height=g.marker.height(),i.top=o.top-a.scrollTop(),i.bottom=s-i.top,i.isRTL="rtl"===a.css("direction")||"rtl"===d.dir,i.left=o.left,i.right=r-o.left,g.debug||(p.empty(),p.remove()),i):l==u.Input?(s=d.clientHeight,r=d.clientWidth,n=a.css(f),$.extend(!0,n,{height:s-2,"min-width":r-2}),c.appendTo(a.parent()).css(n).empty().append(t,g.marker,e),i={top:null,right:null,left:null,height:null,isRTL:!1},o=g.marker.position(),i.height=g.marker.height(),i.top=o.top,i.bottom=s-i.top,i.isRTL="rtl"===a.css("direction")||"rtl"===d.dir,i.left=o.left-a.scrollLeft(),i.right=r-o.left,g.debug||(c.empty(),c.remove()),i):void 0}}function InputManager(t,e){"use strict";var n=this,i=t instanceof jQuery?t:$(t),o=i.get(0);if("input"!=(t=o.nodeName.toLowerCase())&&"textarea"!=t)throw"unsupported element type '"+t+"' for inputManager";const s={debug:!1,enabled:!0,bufferedCusorPosition:0,settings:null},r=(s.settings=$.extend(!0,{},{containerClass:"input-manager",debug:!1,enabled:!0,highlightTemplate:"<div class='highlight'></div>",events:{onKeydown:null,onKeyup:null,onCursorPositionChanged:null}},e),s.debug=s.settings.debug,s.enabled=s.settings.enabled,i.addClass(s.settings.containerClass),new CaretLocator(i,{debug:s.debug}));this.getTarget=function(){return i},this.getSettings=function(){return s.settings},this.setDebug=function(t){s.debug=!!t,r.setDebug(t)},this.setEnabled=function(t){s.enabled=t},this.getEnabled=function(){return s.enabled},this.getCursorOffset=function(t,e){return r.getCursorOffset(t,e)},this.setHighlight=function(t,e,n,i){r.setHighlight(t,e,n,i)},this.unsetHighlight=function(t){r.unsetHighlight(t)},this.getCursorPosition=function(){var t=o.selectionEnd;return"number"==typeof t?t:document.selection?((t=o.createTextRange()).moveStart("character",0),t.moveEnd("textedit"),t.text.length):void 0},this.setCursorPosition=function(t){var e;i.is(":focus")&&("number"==typeof o.selectionEnd?o.selectionStart=o.selectionEnd=t:o.createTextRange&&((e=o.createTextRange()).move("character",t),e.select()))},this.getSelectedText=function(){var t,e=o.selectionStart;return"number"==typeof e?(t=o.selectionEnd,o.value.substring(e,t)):document.selection?o.selection.createRange().text:void 0},this.getInputState=function(){return d()},this.updateCursorPosition=function(){a()};var a=function(){var t,e;s.settings.events.onCursorPositionChanged&&s.enabled&&i.is(":focus")&&(e=n.getCursorPosition(),s.bufferedCusorPosition!=e&&(s.bufferedCusorPosition=e,t=d(),e=$.extend({cursorPosition:e},t),s.settings.events.onCursorPositionChanged.call(n,e)))},d=function(){var t=l(),e=i.val().substring(t.length);return{preText:t,postText:e,cursorOffset:u(t,e)}},l=function(){var t=o.selectionEnd;return"number"==typeof t?o.value.substring(0,t):document.selection?((t=o.createTextRange()).moveStart("character",0),t.moveEnd("textedit"),t.text):void 0},u=function(t,e){return r.getCursorOffset(t,e)};i.on("keydown",function(t){var e;s.settings.events.onKeydown&&s.enabled&&(e=d(),t=$.extend(t,e),s.settings.events.onKeydown.call(n,t))}),i.on("keyup",function(t){var e;s.settings.events.onKeyup&&s.enabled&&(e=d(),t=$.extend(t,e),s.settings.events.onKeyup.call(n,t))}),i.on("keypress keydown keyup input click paste change",a)}
function OptionSelector(t){"use strict";var n=this;if(!t.lists||!Array.isArray(t.lists)||!t.lists.length)throw"There must be atleast one list defined in options.";function a(t){var s,i;l.enabled&&(s=$(t.target).closest("."+l.settings.css.listItemClass),i=l.activeListIndex,$.each(l.uiLists,function(t,e){e.is(s.parent())&&(i=t)}),this.setSelectedIndex(s.data(l.settings.itemDataAttribute),i),null!=l.settings.events.onClicked&&l.settings.events.onClicked.call(this,s))}var l={visible:!0,enabled:!0,settings:null,data:null,selectedIndexes:[],uiRoot:null,uiRootList:null,uiLists:[],activeListIndex:0},e=(l.settings=$.extend(!0,{},{lists:[],data:null,itemDataAttribute:"index",defaultListIndex:0,defaultIndex:-1,visible:!0,enabled:!0,css:{hideRootClass:"root-selector-hide",rootClass:"root-selector",rootListClass:"root-selector-list",rootListItemClass:"root-selector-list-item",listClass:"selector-list",listItemClass:"selector-list-item",selectedListItemClass:"selector-list-selected-item"},mainListTemplate:"<ul></ul>",mainListItemTemplate:"<li></li>",listTemplate:"<ul></ul>",itemTemplate:"<li></li>",events:{onClicked:function(t){},onSelectionChanged:function(t){},onVisibilityChanged:function(t){}},extensions:{formatter:function(t){}}},t),l.visible=l.settings.visible,l.enabled=l.settings.enabled,l.uiRoot=$("<div></div>").addClass(l.settings.css.rootClass),l.uiRootList=$(l.settings.mainListTemplate).addClass(l.settings.css.rootListClass).appendTo(l.uiRoot),$.each(l.settings.lists,function(t,e){l.selectedIndexes[t]=-1,t=$(l.settings.listTemplate).addClass(l.settings.css.listClass).addClass(e.listClass),e=$(l.settings.mainListItemTemplate).addClass(l.settings.css.rootListItemClass).append(t),l.uiRootList.append(e).addClass(l.settings.css.rootListClass),l.uiLists.push(t)}),l.activeListIndex=-1<l.settings.defaultListIndex?l.settings.defaultListIndex:0,this.getUIRoot=function(){return l.uiRoot},this.getUILists=function(){return l.uiLists},this.getEnabled=function(){return l.enabled},this.setEnabled=function(t){l.enabled=!!t},this.getData=function(){return l.data},this.setData=function(t){this.clear(),t&&Array.isArray(t)&&t.length==l.uiLists.length&&(l.data=t,e(),this.setSelectedIndex())},this.getListCount=function(){return l.uiLists.length},this.getListItemCount=function(t){if(l.uiLists[t])return l.uiLists[t].children().length},this.getVisible=function(){return l.visible},this.setVisible=function(t){var e=!1;t&&!l.visible?(l.uiRoot.removeClass(l.settings.css.hideRootClass),e=l.visible=!0):!t&&l.visible&&(l.uiRoot.addClass(l.settings.css.hideRootClass),e=!(l.visible=!1)),e&&null!=l.settings.events.onVisibilityChanged&&l.enabled&&l.settings.events.onVisibilityChanged.call(this,l.visible)},l.visible||l.uiRoot.addClass(l.settings.css.hideRootClass),this.clear=function(){l.data=null,$.each(l.uiLists,function(t,e){e.empty()}),$.each(l.selectedIndexes,function(t,e){}),l.activeListIndex=-1<l.settings.defaultListIndex?l.settings.defaultListIndex:0},this.getSelectedDataItem=function(){return l.data&&-1<l.activeListIndex&&-1<l.selectedIndexes[l.activeListIndex]?l.data[l.activeListIndex][l.selectedIndexes[l.activeListIndex]]:null},this.getSelectedIndex=function(){return l.data&&-1<l.activeListIndex&&-1<l.selectedIndexes[l.activeListIndex]?{listIndex:l.activeListIndex,listItemIndex:l.selectedIndexes[l.activeListIndex]}:null},this.setSelectedIndex=function(t,e){var n,a;e==l.activeListIndex&&t==l.selectedIndexes[l.activeListIndex]||(n="number"!=typeof e?l.activeListIndex:e,a="number"!=typeof t?l.settings.defaultIndex:t,-1<n&&n<l.uiLists.length&&-1<a&&a<l.uiLists[n].children().length&&($.each(l.uiLists,function(s){var t=l.uiLists[s].children(),i=l.settings.lists[s].selectedListItemClass;t.each(function(t,e){d(i,$(e),s!=n?-1:a,t)}),l.activeListIndex=n,l.selectedIndexes[l.activeListIndex]=a}),"number"==typeof t&&null!=l.settings.events.onSelectionChanged&&l.enabled&&l.settings.events.onSelectionChanged.call(this,{activeListIndex:l.activeListIndex,activeListItemIndex:a})))},function(){l.data&&$.each(l.settings.lists,function(t,i){var n=l.uiLists[t];l.data[t]&&$.each(l.data[t],function(t,e){var s=$(l.settings.itemTemplate).data(l.settings.itemDataAttribute,t).addClass(l.settings.css.listItemClass).addClass(i.listItemClass);l.settings.extensions.formatter?s.append(l.settings.extensions.formatter(e,s)):s.text(e),d(i.selectedListItemClass,s,-1,t),n.append(s)})})}),d=function(t,e,s,i){s!=i?e.removeClass(l.settings.css.selectedListItemClass).removeClass(t):e.hasClass(t)||e.addClass(l.settings.css.selectedListItemClass).addClass(t)};$.each(l.uiLists,function(t,e){var s,i;e.on("click","> *",(i=n,(s=a).bind?s.bind(i):function(){s.apply(i,arguments)}))}),l.settings.data&&this.setData(l.settings.data)}
!function(f,i){"use strict";const n="inputWizard",s={enabled:!0,popupSettings:[],inputManagerClass:"input-manager",inputControlClass:"input-control",fullWordMatchOnly:!0,formatter:null,triggers:null,events:{onDataLoad:function(t){return!0},onSelected:null},extensions:{getSelectorPositionOverride:null}};function r(){var n={};this.setSearchCache=function(t,e){n[t]=e},this.getSearchCache=function(t){return n[t]}}const I={UP:38,DOWN:40,LEFT:37,RIGHT:39,BACKSPACE:8,DELETE:46,ESCAPE:27,ENTER:13,SPACEBAR:32,TAB:9};function o(t,e){const a=t instanceof jQuery?t:f(t),l=this,u={enabled:!0,enableCache:!0,currentMatchStartLocation:-1,optionSelectorStateInfo:null,debounceTimer:null,highlight:f("<div class='highlight'></div>"),settings:null};u.settings=f.extend(!0,{},s,e),u.enabled=u.settings.enabled;var d=new OptionSelector({lists:u.settings.popupSettings.lists,defaultListIndex:u.settings.popupSettings.defaultListIndex,defaultIndex:u.settings.popupSettings.defaultIndex,rootListClass:u.settings.popupSettings.rootListClass,rootListItemClass:u.settings.popupSettings.rootListItemClass,visible:!1,events:{onClicked:function(t){a.focus(),d.getVisible()&&(g(d,a),d.setVisible(!1))},onVisibilityChanged:function(t){t||(p.unsetHighlight(u.highlight),u.currentMatchStartLocation=-1,u.optionSelectorStateInfo=null)}},extensions:{formatter:u.settings.formatter}}),h=new r,p=new InputManager(a,{containerClass:u.settings.inputManagerClass});function n(t,e){return t.bind?t.bind(e):function(){t.apply(e,arguments[2])}}var c=function(t,e,n){var i;!(47<(i=n)&&i<58||32===i||64<i&&i<91||95<i&&i<112||185<i&&i<193||218<i&&i<223)&&[I.BACKSPACE,I.DELETE].indexOf(n)<0||(i=t&&n==I.SPACEBAR&&!d.getVisible(),o(t,n,i))},o=function(t,e,n){var i=p.getInputState(),o=i.preText;if(o&&o.trim().length){for(var s=0;s<u.settings.triggers.length;s++){var r=u.settings.triggers[s],a=null;if(n?(a=o.match(r.match))&&(u.currentMatchStartLocation=o.length-a[a.length-1].length):o.length<=o.replace(/\s+$/,"").length&&(u.currentMatchStartLocation<0&&(u.currentMatchStartLocation=o.length-1),-1<u.currentMatchStartLocation&&(a=o.substring(u.currentMatchStartLocation).match(r.match))),a){var l,c=a[a.length-1],g=h.getSearchCache(c);p.setHighlight(u.highlight,i.preText,i.postText,c),null!=g?(l=g[0],g=g[1],S(i,l,c)(g)):r.search(c,S(i,r,c));break}}a?p.unsetHighlight(u.highlight):d.setVisible(!1)}else d.setVisible(!1)},S=function(n,i,o){return function(t){var e=!1;t&&u.settings.events.onDataLoad&&(e=u.settings.events.onDataLoad.call(l,t),!h.getSearchCache(o)&&u.enableCache&&h.setSearchCache(o,[i,t])),e&&p.getInputState().preText==n.preText&&(d.setData(t),u.optionSelectorStateInfo={preText:n.preText,postText:n.postText,trigger:i,term:o},d.getVisible()||(e=n.cursorOffset,u.settings.extensions.getSelectorPositionOverride&&(t=u.settings.extensions.getSelectorPositionOverride(e),d.getUIRoot().css(t)),d.setVisible(!0)))}},g=function(t,e){var n,i,o,s,r;p.unsetHighlight(u.highlight),t.getVisible()&&(n=u.optionSelectorStateInfo.trigger,i=u.optionSelectorStateInfo.term,o=t.getSelectedDataItem(),t=n.replace(o,i,t.getSelectedIndex().listIndex),r=s=null,r=u.currentMatchStartLocation<0?f.isArray(t)?(s=u.optionSelectorStateInfo.preText.replace(n.match,t[0]),t[1]+u.optionSelectorStateInfo.postText):(s=u.optionSelectorStateInfo.preText.replace(n.match,t),u.optionSelectorStateInfo.postText):f.isArray(t)?(s=u.optionSelectorStateInfo.preText.substring(0,u.currentMatchStartLocation)+u.optionSelectorStateInfo.preText.substring(u.currentMatchStartLocation).replace(n.match,t[0]),t[1]+u.optionSelectorStateInfo.postText):(s=u.optionSelectorStateInfo.preText.substring(0,u.currentMatchStartLocation)+u.optionSelectorStateInfo.preText.substring(u.currentMatchStartLocation).replace(n.match,t),u.optionSelectorStateInfo.postText),e.val(s+r),p.setCursorPosition(s.length),u.settings.events.onSelected&&u.settings.events.onSelected.call(l,i,o)),d.setVisible(!1)},t=f("<div></div>");t.addClass(u.settings.inputControlClass),a.before(t).detach(),t.append(u.highlight),t.append(d.getUIRoot()),t.append(a),f(i.body).bind("click",function(t){0==f(t.target).closest(d).length&&d.setVisible(!1)});return a.on("keydown",n(function(t){if(u.enabled){var e,n,i,o=t.which,s=t.ctrlKey,r=t.shiftKey;if(p.updateCursorPosition(),d.getVisible()){if(o===I.ESCAPE)return t.preventDefault(),void d.setVisible(!1);if(o===I.UP)return t.preventDefault(),void d.setSelectedIndex(d.getSelectedIndex().listItemIndex-1);if(o===I.DOWN)return t.preventDefault(),void d.setSelectedIndex(d.getSelectedIndex().listItemIndex+1);if(o==I.LEFT)return t.preventDefault(),void(-1<(e=d.getSelectedIndex().listIndex-1)&&(n=d.getSelectedIndex().listItemIndex,i=d.getListItemCount(e),d.setSelectedIndex(n=i<=n?i-1:n,e)));if(o==I.RIGHT)return t.preventDefault(),void((e=d.getSelectedIndex().listIndex+1)<d.getListCount()&&(n=d.getSelectedIndex().listItemIndex,i=d.getListItemCount(e),d.setSelectedIndex(n=i<=n?i-1:n,e)));if(o===I.ENTER||o===I.SPACEBAR&&u.settings.selectOnSpacebar){if(o===I.ENTER&&d.getVisible()&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),!s)return void g(d,a)}else if(o===I.TAB)return t.preventDefault(),e=d.getSelectedIndex().listIndex,n=d.getSelectedIndex().listItemIndex,i=d.getListItemCount(e),void(r?0==n&&0<i?d.setSelectedIndex(i-1):d.setSelectedIndex(n-1):i-1<=n&&0<i?d.setSelectedIndex(0):d.setSelectedIndex(n+1))}else if(-1<[I.BACKSPACE,I.DELETE].indexOf(o))return;setTimeout(c,0,s,r,o)}},l)),a.on("scroll",n(function(t){},l)),{setEnabled:function(t){u.enabled=!!t,p.setEnabled(u.enabled),d.setEnabled(u.enabled),p.unsetHighlight(u.highlight),t||d.setVisible(!1)},getEnabled:function(){return u.enabled}}}o.prototype={getEnabled:function(){return getEnabled()},setEnabled:function(t){setEnabled(t)}},f.fn[n]=function(e){return this.each(function(){var t;f.data(this,n)||(t=new o(this,e),f.data(this,n,t))})}}(jQuery,(window,document));