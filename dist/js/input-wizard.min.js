function CaretLocator(t,e){"use strict";const a=t instanceof jQuery?t:$(t),d=a.get(0),l=d.nodeName.toUpperCase(),u={TextArea:"TEXTAREA",Input:"INPUT"};if((t=l)!=u.TextArea&&t!=u.Input)throw"unsupported element type '"+t+"' for InputManager";const g={marker:$("<span style='white-space: nowrap; padding: 0; margin: 0;'>â€‹</span>"),debug:!1,settings:null};g.settings=$.extend(!0,{},{debug:!1},e),g.debug=g.settings.debug;var p=$("<div></div>").css({"border-width":"1px","border-style":"solid",overflow:"hidden","box-sizing":"border-box","white-space":"pre-wrap","word-wrap":"break-word",position:"absolute",top:g.debug?a.position().top+"px":"0px",left:g.debug?a.position().left+a.width()+100+"px":"-9999px",visibility:g.debug?"visible":"hidden"}),c=$("<div></div>").css({"border-width":"1px","border-style":"solid",overflow:"hidden","box-sizing":"border-box","white-space":"nowrap","word-wrap":"nowrap",position:"absolute",top:g.debug?a.position().top+"px":"0px",left:g.debug?a.position().left+a.width()+100+"px":"-9999px",visibility:g.debug?"visible":"hidden"}),h=["font-family","font-size","font-weight","font-style","font-variant","font-stretch","font-size-adjust","line-height","border-top-width","border-right-width","border-bottom-width","border-left-width","border-style","padding-top","padding-left","padding-bottom","padding-right","box-sizing","width","height","overflow-x","overflow-y","tab-size","moz-tab-size","line-height","letter-spacing","word-spacing","text-decoration","text-align","text-transform","text-indent","direction"],f=["font-family","font-size","font-weight","font-style","font-variant","padding-top","padding-left","padding-bottom","padding-right","line-height","letter-spacing","word-spacing","text-decoration","text-align","direction"];this.setHighlight=function(t,e,n,i){var o;t.empty(),i&&(l==u.TextArea?(o=a.css(h),t.css(o),t.append(e.substr(0,e.length-i.length)),t.append($("<span style='background-color: yellow; color: transparent;'></span>").append(i)),t.append(n),t.css({top:-1*a.scrollTop()})):l==u.Input&&(o=a.css(f),t.css(o),t.append(e.substr(0,e.length-i.length)),t.append($("<span style='background-color: yellow; color: transparent;'></span>").append(i)),t.append(n)))},this.unsetHighlight=function(t){t.empty()},this.setDebug=function(t){g.debug=!!t},this.getCursorOffset=function(t,e){var n,i,o,s=d.clientHeight,r=d.clientWidth;return l==u.TextArea?(n=a.css(h),$.extend(n,{height:s-2,width:r-2}),p.appendTo(a.parent()).css(n).empty().append(t,g.marker,e),i={top:null,right:null,left:null,height:null,isRTL:!1},o=g.marker.position(),i.height=g.marker.height(),i.top=o.top-a.scrollTop(),i.bottom=s-i.top,i.isRTL="rtl"===a.css("direction")||"rtl"===d.dir,i.left=o.left,i.right=r-o.left,g.debug||(p.empty(),p.remove()),i):l==u.Input?(s=d.clientHeight,r=d.clientWidth,n=a.css(f),$.extend(!0,n,{height:s-2,"min-width":r-2}),c.appendTo(a.parent()).css(n).empty().append(t,g.marker,e),i={top:null,right:null,left:null,height:null,isRTL:!1},o=g.marker.position(),i.height=g.marker.height(),i.top=o.top,i.bottom=s-i.top,i.isRTL="rtl"===a.css("direction")||"rtl"===d.dir,i.left=o.left-a.scrollLeft(),i.right=r-o.left,g.debug||(c.empty(),c.remove()),i):void 0}}function InputManager(t,e){"use strict";var n=this,i=t instanceof jQuery?t:$(t),o=i.get(0);if("input"!=(t=o.nodeName.toLowerCase())&&"textarea"!=t)throw"unsupported element type '"+t+"' for inputManager";const s={debug:!1,enabled:!0,bufferedCusorPosition:0,settings:null},r=(s.settings=$.extend(!0,{},{containerClass:"input-manager",debug:!1,enabled:!0,highlightTemplate:"<div class='highlight'></div>",events:{onKeydown:null,onKeyup:null,onCursorPositionChanged:null}},e),s.debug=s.settings.debug,s.enabled=s.settings.enabled,i.addClass(s.settings.containerClass),new CaretLocator(i,{debug:s.debug}));this.getTarget=function(){return i},this.getSettings=function(){return s.settings},this.setDebug=function(t){s.debug=!!t,r.setDebug(t)},this.setEnabled=function(t){s.enabled=t},this.getEnabled=function(){return s.enabled},this.getCursorOffset=function(t,e){return r.getCursorOffset(t,e)},this.setHighlight=function(t,e,n,i){r.setHighlight(t,e,n,i)},this.unsetHighlight=function(t){r.unsetHighlight(t)},this.getCursorPosition=function(){var t=o.selectionEnd;return"number"==typeof t?t:document.selection?((t=o.createTextRange()).moveStart("character",0),t.moveEnd("textedit"),t.text.length):void 0},this.setCursorPosition=function(t){var e;i.is(":focus")&&("number"==typeof o.selectionEnd?o.selectionStart=o.selectionEnd=t:o.createTextRange&&((e=o.createTextRange()).move("character",t),e.select()))},this.getSelectedText=function(){var t,e=o.selectionStart;return"number"==typeof e?(t=o.selectionEnd,o.value.substring(e,t)):document.selection?o.selection.createRange().text:void 0},this.getInputState=function(){return d()},this.updateCursorPosition=function(){a()};var a=function(){var t,e;s.settings.events.onCursorPositionChanged&&s.enabled&&i.is(":focus")&&(e=n.getCursorPosition(),s.bufferedCusorPosition!=e&&(s.bufferedCusorPosition=e,t=d(),e=$.extend({cursorPosition:e},t),s.settings.events.onCursorPositionChanged.call(n,e)))},d=function(){var t=l(),e=i.val().substring(t.length);return{preText:t,postText:e,cursorOffset:u(t,e)}},l=function(){var t=o.selectionEnd;return"number"==typeof t?o.value.substring(0,t):document.selection?((t=o.createTextRange()).moveStart("character",0),t.moveEnd("textedit"),t.text):void 0},u=function(t,e){return r.getCursorOffset(t,e)};i.on("keydown",function(t){var e;s.settings.events.onKeydown&&s.enabled&&(e=d(),t=$.extend(t,e),s.settings.events.onKeydown.call(n,t))}),i.on("keyup",function(t){var e;s.settings.events.onKeyup&&s.enabled&&(e=d(),t=$.extend(t,e),s.settings.events.onKeyup.call(n,t))}),i.on("keypress keydown keyup input click paste change",a)}
function OptionSelector(t){"use strict";var n=this;if(!t.lists||!Array.isArray(t.lists)||!t.lists.length)throw"There must be atleast one list defined in options.";function l(t){var s,i;a.enabled&&(s=$(t.target).closest("."+a.settings.css.listItemClass),i=a.activeListIndex,$.each(a.uiLists,function(t,e){e.is(s.parent())&&(i=t)}),this.setSelectedIndex(s.data(a.settings.itemDataAttribute),i),null!=a.settings.events.onClicked&&a.settings.events.onClicked.call(this,s))}var a={visible:!0,enabled:!0,settings:null,data:null,selectedIndexes:[],uiRoot:null,uiRootList:null,uiLists:[],activeListIndex:0},e=(a.settings=$.extend(!0,{},{lists:[],data:null,itemDataAttribute:"index",defaultListIndex:0,defaultIndex:-1,visible:!0,enabled:!0,css:{hideRootClass:"root-selector-hide",rootClass:"root-selector",rootListClass:"root-selector-list",rootListItemClass:"root-selector-list-item",listClass:"selector-list",listItemClass:"selector-list-item",selectedListItemClass:"selector-list-item-selected"},mainListTemplate:"<ul></ul>",mainListItemTemplate:"<li></li>",listTemplate:"<ul></ul>",itemTemplate:"<li></li>",events:{onClicked:function(t){},onSelectionChanged:function(t){},onVisibilityChanged:function(t){}},extensions:{formatter:function(t){}}},t),a.visible=a.settings.visible,a.enabled=a.settings.enabled,a.uiRoot=$("<div></div>").addClass(a.settings.css.rootClass),a.uiRootList=$(a.settings.mainListTemplate).addClass(a.settings.css.rootListClass).appendTo(a.uiRoot),$.each(a.settings.lists,function(t,e){a.selectedIndexes[t]=-1,t=$(a.settings.listTemplate).addClass(a.settings.css.listClass).addClass(e.listClass),e=$(a.settings.mainListItemTemplate).addClass(a.settings.css.rootListItemClass).append(t),a.uiRootList.append(e).addClass(a.settings.css.rootListClass),a.uiLists.push(t)}),a.activeListIndex=-1<a.settings.defaultListIndex?a.settings.defaultListIndex:0,this.getUIRoot=function(){return a.uiRoot},this.getUILists=function(){return a.uiLists},this.getEnabled=function(){return a.enabled},this.setEnabled=function(t){a.enabled=!!t},this.getData=function(){return a.data},this.setData=function(t){this.clear(),t&&Array.isArray(t)&&t.length==a.uiLists.length&&(a.data=t,e(),this.setSelectedIndex())},this.getListCount=function(){return a.uiLists.length},this.getListItemCount=function(t){if(a.uiLists[t])return a.uiLists[t].children().length},this.getVisible=function(){return a.visible},this.setVisible=function(t){var e=!1;t&&!a.visible?(a.uiRoot.removeClass(a.settings.css.hideRootClass),e=a.visible=!0):!t&&a.visible&&(a.uiRoot.addClass(a.settings.css.hideRootClass),e=!(a.visible=!1)),e&&null!=a.settings.events.onVisibilityChanged&&a.enabled&&a.settings.events.onVisibilityChanged.call(this,a.visible)},a.visible||a.uiRoot.addClass(a.settings.css.hideRootClass),this.clear=function(){a.data=null,$.each(a.uiLists,function(t,e){e.empty()}),$.each(a.selectedIndexes,function(t,e){}),a.activeListIndex=-1<a.settings.defaultListIndex?a.settings.defaultListIndex:0},this.getSelectedDataItem=function(){return a.data&&-1<a.activeListIndex&&-1<a.selectedIndexes[a.activeListIndex]?a.data[a.activeListIndex][a.selectedIndexes[a.activeListIndex]]:null},this.getSelectedIndex=function(){return a.data&&-1<a.activeListIndex&&-1<a.selectedIndexes[a.activeListIndex]?{listIndex:a.activeListIndex,listItemIndex:a.selectedIndexes[a.activeListIndex]}:null},this.setSelectedIndex=function(t,e){var n,l;e==a.activeListIndex&&t==a.selectedIndexes[a.activeListIndex]||(n="number"!=typeof e?a.activeListIndex:e,l="number"!=typeof t?a.settings.defaultIndex:t,-1<n&&n<a.uiLists.length&&-1<l&&l<a.uiLists[n].children().length&&($.each(a.uiLists,function(s){var t=a.uiLists[s].children(),i=a.settings.lists[s].selectedListItemClass;t.each(function(t,e){d(i,$(e),n,s!=n?-1:l,t)}),a.activeListIndex=n,a.selectedIndexes[a.activeListIndex]=l}),"number"==typeof t&&null!=a.settings.events.onSelectionChanged&&a.enabled&&a.settings.events.onSelectionChanged.call(this,{activeListIndex:a.activeListIndex,activeListItemIndex:l})))},function(){a.data&&$.each(a.settings.lists,function(t,i){var n=a.uiLists[t];a.data[t]&&$.each(a.data[t],function(t,e){var s=$(a.settings.itemTemplate).data(a.settings.itemDataAttribute,t).addClass(a.settings.css.listItemClass).addClass(i.listItemClass);a.settings.extensions.formatter?s.append(a.settings.extensions.formatter(e,s)):s.text(e),d(i.selectedListItemClass,s,-1,-1,t),n.append(s)})})}),d=function(t,e,s,i,n){var l=null,l=(l=-1<s?a.settings.lists[s].selectedItemClass:l)||a.settings.css.selectedListItemClass;i!=n?e.removeClass(l).removeClass(t):e.hasClass(t)||e.addClass(l).addClass(t)};$.each(a.uiLists,function(t,e){var s,i;e.on("click","> *",(i=n,(s=l).bind?s.bind(i):function(){s.apply(i,arguments)}))}),a.settings.data&&this.setData(a.settings.data)}
!function(f,i){"use strict";const n="inputWizard",o={enabled:!0,popupSettings:{lists:[],defaultListIndex:0,defaultIndex:0,inputControlClass:"input-control",inputManagerClass:"input-manager"},fullWordMatchOnly:!0,selectOnSpacebar:!0,fullTextMatching:!0,formatter:null,triggers:null,events:{onDataLoad:function(t){return!0},onSelected:null},extensions:{getSelectorPositionOverride:null}};function r(){var n={};this.setSearchCache=function(t,e){n[t]=e},this.getSearchCache=function(t){return n[t]}}const I={UP:38,DOWN:40,LEFT:37,RIGHT:39,BACKSPACE:8,DELETE:46,ESCAPE:27,ENTER:13,SPACEBAR:32,TAB:9};function s(t,e){const a=t instanceof jQuery?t:f(t),l=this,u={enabled:!0,enableCache:!0,currentMatchStartLocation:-1,optionSelectorStateInfo:null,debounceTimer:null,highlight:f("<div class='highlight'></div>"),settings:null};u.settings=f.extend(!0,{},o,e),u.enabled=u.settings.enabled;var d=new OptionSelector({lists:u.settings.popupSettings.lists,defaultListIndex:u.settings.popupSettings.defaultListIndex,defaultIndex:u.settings.popupSettings.defaultIndex,rootListClass:u.settings.popupSettings.rootListClass,rootListItemClass:u.settings.popupSettings.rootListItemClass,visible:!1,events:{onClicked:function(t){a.focus(),d.getVisible()&&(g(d,a),d.setVisible(!1))},onVisibilityChanged:function(t){t||(h.unsetHighlight(u.highlight),u.currentMatchStartLocation=-1,u.optionSelectorStateInfo=null)}},extensions:{formatter:u.settings.formatter}}),p=new r,h=new InputManager(a,{containerClass:u.settings.popupSettings.inputManagerClass});function n(t,e){return t.bind?t.bind(e):function(){t.apply(e,arguments[2])}}var c=function(t,e,n){var i;!(47<(i=n)&&i<58||32===i||64<i&&i<91||95<i&&i<112||185<i&&i<193||218<i&&i<223)&&[I.BACKSPACE,I.DELETE].indexOf(n)<0||(i=t&&n==I.SPACEBAR&&!d.getVisible(),s(t,n,i))},s=function(t,e,n){var i=h.getInputState(),s=i.preText;if(s&&s.trim().length){for(var o=0;o<u.settings.triggers.length;o++){var r=u.settings.triggers[o],a=null;if(n?(a=s.match(r.match))&&(u.currentMatchStartLocation=s.length-a[a.length-1].length):s.length<=s.replace(/\s+$/,"").length&&(u.currentMatchStartLocation<0&&(u.currentMatchStartLocation=s.length-1),-1<u.currentMatchStartLocation&&(a=s.substring(u.currentMatchStartLocation).match(r.match))),a){var l,c=a[a.length-1],g=p.getSearchCache(c);h.setHighlight(u.highlight,i.preText,i.postText,c),null!=g?(l=g[0],g=g[1],S(i,l,c)(g)):r.search(c,S(i,r,c));break}}a?h.unsetHighlight(u.highlight):d.setVisible(!1)}else d.setVisible(!1)},S=function(n,i,s){return function(t){var e=!1;t&&u.settings.events.onDataLoad&&(e=u.settings.events.onDataLoad.call(l,t),!p.getSearchCache(s)&&u.enableCache&&p.setSearchCache(s,[i,t])),e&&h.getInputState().preText==n.preText&&(d.setData(t),u.optionSelectorStateInfo={preText:n.preText,postText:n.postText,trigger:i,term:s},d.getVisible()||(e=n.cursorOffset,u.settings.extensions.getSelectorPositionOverride&&(t=u.settings.extensions.getSelectorPositionOverride(e),d.getUIRoot().css(t)),d.setVisible(!0)))}},g=function(t,e){var n,i,s,o,r;h.unsetHighlight(u.highlight),t.getVisible()&&(n=u.optionSelectorStateInfo.trigger,i=u.optionSelectorStateInfo.term,s=t.getSelectedDataItem(),t=n.replace(s,i,t.getSelectedIndex().listIndex),r=o=null,r=u.currentMatchStartLocation<0?f.isArray(t)?(o=u.optionSelectorStateInfo.preText.replace(n.match,t[0]),t[1]+u.optionSelectorStateInfo.postText):(o=u.optionSelectorStateInfo.preText.replace(n.match,t),u.optionSelectorStateInfo.postText):f.isArray(t)?(o=u.optionSelectorStateInfo.preText.substring(0,u.currentMatchStartLocation)+u.optionSelectorStateInfo.preText.substring(u.currentMatchStartLocation).replace(n.match,t[0]),t[1]+u.optionSelectorStateInfo.postText):(o=u.optionSelectorStateInfo.preText.substring(0,u.currentMatchStartLocation)+u.optionSelectorStateInfo.preText.substring(u.currentMatchStartLocation).replace(n.match,t),u.optionSelectorStateInfo.postText),e.val(o+r),h.setCursorPosition(o.length),u.settings.events.onSelected&&u.settings.events.onSelected.call(l,i,s)),d.setVisible(!1)},t=f("<div></div>");t.addClass(u.settings.popupSettings.inputControlClass),a.before(t).detach(),t.append(u.highlight),t.append(d.getUIRoot()),t.append(a),f(i.body).bind("click",function(t){0==f(t.target).closest(d).length&&d.setVisible(!1)});return a.on("keydown",n(function(t){if(u.enabled){var e,n,i,s=t.which,o=t.ctrlKey,r=t.shiftKey;if(h.updateCursorPosition(),d.getVisible()){if(s===I.ESCAPE)return t.preventDefault(),void d.setVisible(!1);if(s===I.UP)return t.preventDefault(),void d.setSelectedIndex(d.getSelectedIndex().listItemIndex-1);if(s===I.DOWN)return t.preventDefault(),void d.setSelectedIndex(d.getSelectedIndex().listItemIndex+1);if(s==I.LEFT)return t.preventDefault(),void(-1<(e=d.getSelectedIndex().listIndex-1)&&(n=d.getSelectedIndex().listItemIndex,i=d.getListItemCount(e),d.setSelectedIndex(n=i<=n?i-1:n,e)));if(s==I.RIGHT)return t.preventDefault(),void((e=d.getSelectedIndex().listIndex+1)<d.getListCount()&&(n=d.getSelectedIndex().listItemIndex,i=d.getListItemCount(e),d.setSelectedIndex(n=i<=n?i-1:n,e)));if(s===I.ENTER||s===I.SPACEBAR&&u.settings.selectOnSpacebar){if(s===I.ENTER&&d.getVisible()&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),!o)return void g(d,a)}else if(s===I.TAB)return t.preventDefault(),e=d.getSelectedIndex().listIndex,n=d.getSelectedIndex().listItemIndex,i=d.getListItemCount(e),void(r?0==n&&0<i?d.setSelectedIndex(i-1):d.setSelectedIndex(n-1):i-1<=n&&0<i?d.setSelectedIndex(0):d.setSelectedIndex(n+1))}else if(-1<[I.BACKSPACE,I.DELETE].indexOf(s))return;setTimeout(c,0,o,r,s)}},l)),a.on("scroll",n(function(t){},l)),{setEnabled:function(t){u.enabled=!!t,h.setEnabled(u.enabled),d.setEnabled(u.enabled),h.unsetHighlight(u.highlight),t||d.setVisible(!1)},getEnabled:function(){return u.enabled}}}s.prototype={getEnabled:function(){return getEnabled()},setEnabled:function(t){setEnabled(t)}},f.fn[n]=function(e){return this.each(function(){var t;f.data(this,n)||(t=new s(this,e),f.data(this,n,t))})}}(jQuery,(window,document));